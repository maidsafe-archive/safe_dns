<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `ConnectionManager` struct in crate `crust`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, ConnectionManager">

    <title>crust::connection_manager::ConnectionManager - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../main.css">

    <link rel="shortcut icon" href="http://maidsafe.net/img/favicon.ico">
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        <a href='../../crust/index.html'><img src='http://maidsafe.net/img/Resources/branding/maidsafe_logo.fab2.png' alt='' width='100'></a>
        <p class='location'><a href='../index.html'>crust</a>::<wbr><a href='index.html'>connection_manager</a></p><script>window.sidebarCurrent = {name: 'ConnectionManager', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>crust</a>::<wbr><a href='index.html'>connection_manager</a>::<wbr><a class='struct' href=''>ConnectionManager</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-59' class='srclink' href='../../src/crust/connection_manager.rs.html#47-52' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct ConnectionManager {
    // some fields omitted
}</pre><div class='docblock'><p>A structure representing a connection manager.</p>

<p>This abstraction has a hidden dependency on a config file. Refer to <a href="../file_handler/struct.FileHandler.html">the docs for <code>FileHandler</code></a> and <a href="https://github.com/maidsafe/crust/blob/master/docs/vault_config_file_flowchart.pdf">an example config file flowchart</a> for more
information.</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl <a class='struct' href='../../crust/connection_manager/struct.ConnectionManager.html' title='crust::connection_manager::ConnectionManager'>ConnectionManager</a></code></h3><div class='impl-items'><h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>(event_pipe: <a class='struct' href='https://doc.rust-lang.org/nightly/std/sync/mpsc/struct.Sender.html' title='std::sync::mpsc::Sender'>Sender</a>&lt;<a class='enum' href='../../crust/connection_manager/enum.Event.html' title='crust::connection_manager::Event'>Event</a>&gt;) -&gt; <a class='struct' href='../../crust/connection_manager/struct.ConnectionManager.html' title='crust::connection_manager::ConnectionManager'>ConnectionManager</a></code></h4>
<div class='docblock'><p>Constructs a connection manager. User needs to create an asynchronous channel, and provide
the sender half to this method. Receiver will receive all <code>Event</code>s from this library.</p>
</div><h4 id='method.start_accepting' class='method'><code>fn <a href='#method.start_accepting' class='fnname'>start_accepting</a>(&amp;mut self, port: <a class='enum' href='../../crust/enum.Port.html' title='crust::Port'>Port</a>) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a class='enum' href='../../crust/enum.Port.html' title='crust::Port'>Port</a>&gt;</code></h4>
<div class='docblock'><p>Starts listening on all supported protocols. Ports in <em>hint</em> are tried
first.  On failure to listen on none of <em>hint</em> an OS randomly chosen
port will be used for each supported protocol. The actual port used will
be returned on which it started listening for each protocol.</p>
</div><h4 id='method.bootstrap' class='method'><code>fn <a href='#method.bootstrap' class='fnname'>bootstrap</a>(&amp;mut self, max_successful_bootstrap_connection: <a href='https://doc.rust-lang.org/nightly/std/primitive.usize.html'>usize</a>)</code></h4>
<div class='docblock'><p>This method tries to connect (bootstrap to existing network) to the default or provided
override list of bootstrap nodes (via config file named <current executable>.config).</p>

<p>If <code>override_default_bootstrap_methods</code> is not set in the config file, it will attempt to read
a local cached file named <current executable>.bootstrap.cache to populate the list endpoints
to use for bootstrapping. It will also try <code>hard_coded_contacts</code> from config file.
In addition, it will try to use the beacon port (provided via config file) to connect to a peer
on the same LAN.
For more details on bootstrap cache file refer
<a href="https://github.com/maidsafe/crust/blob/master/docs/bootstrap.md">https://github.com/maidsafe/crust/blob/master/docs/bootstrap.md</a></p>

<p>If <code>override_default_bootstrap_methods</code> is set in config file, it will only try to connect to
the endpoints in the override list (<code>hard_coded_contacts</code>).
All connections (if any) will be dropped before bootstrap attempt is made.
This method returns immediately after dropping any active connections.endpoints
New bootstrap connections will be notified by <code>NewBootstrapConnection</code> event.
Its upper layer&#39;s responsibility to maintain or drop these connections.
Maximum of <code>max_successful_bootstrap_connection</code> bootstrap connections will be made and further connection
attempts will stop.
It will reiterate the list of all endpoints until it gets at least one connection.</p>
</div><h4 id='method.stop' class='method'><code>fn <a href='#method.stop' class='fnname'>stop</a>(&amp;mut self)</code></h4>
<div class='docblock'><p>This should be called before destroying an instance of a ConnectionManager to allow the
listener threads to join.  Once called, the ConnectionManager should be destroyed.</p>
</div><h4 id='method.connect' class='method'><code>fn <a href='#method.connect' class='fnname'>connect</a>(&amp;self, endpoints: <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>&gt;)</code></h4>
<div class='docblock'><p>Opens a connection to a remote peer. <code>endpoints</code> is a vector of addresses of the remote
peer. All the endpoints will be tried. As soon as a connection is established, it will drop
all other ongoing attempts. On success <code>Event::NewConnection</code> with connected <code>Endpoint</code> will
be sent to the event channel. On failure, nothing is reported.
Failed attempts are not notified back up to the caller. If the caller wants to know of a
failed attempt, it must maintain a record of the attempt itself which times out if a
corresponding <code>Event::NewConnection</code> isn&#39;t received.  See also <a href="https://github.com/maidsafe/crust/blob/master/docs/connect.md">Process for Connecting</a> for details on handling of
connect in different protocols.</p>
</div><h4 id='method.send' class='method'><code>fn <a href='#method.send' class='fnname'>send</a>(&amp;self, endpoint: <a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>, message: <a class='type' href='../../crust/connection_manager/type.Bytes.html' title='crust::connection_manager::Bytes'>Bytes</a>) -&gt; <a class='type' href='https://doc.rust-lang.org/nightly/std/io/error/type.Result.html' title='std::io::error::Result'>Result</a>&lt;<a href='https://doc.rust-lang.org/nightly/std/primitive.tuple.html'>()</a>&gt;</code></h4>
<div class='docblock'><p>Sends a message to specified address (endpoint). Returns Ok(()) if the sending might
succeed, and returns an Err if the address is not connected. Return value of Ok does not
mean that the data will be received. It is possible for the corresponding connection to hang
up immediately after this function returns Ok.</p>
</div><h4 id='method.drop_node' class='method'><code>fn <a href='#method.drop_node' class='fnname'>drop_node</a>(&amp;self, endpoint: <a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>)</code></h4>
<div class='docblock'><p>Closes connection with the specified endpoint.</p>
</div><h4 id='method.get_own_endpoints' class='method'><code>fn <a href='#method.get_own_endpoints' class='fnname'>get_own_endpoints</a>(&amp;self) -&gt; <a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;<a class='enum' href='../../crust/enum.Endpoint.html' title='crust::Endpoint'>Endpoint</a>&gt;</code></h4>
<div class='docblock'><p>Return the endpoints other peers can use to connect to. External address
are obtained through UPnP IGD.</p>
</div></div><h2 id='implementations'>Trait Implementations</h2><h3 class='impl'><code>impl <a class='trait' href='https://doc.rust-lang.org/nightly/core/ops/trait.Drop.html' title='core::ops::Drop'>Drop</a> for <a class='struct' href='../../crust/connection_manager/struct.ConnectionManager.html' title='crust::connection_manager::ConnectionManager'>ConnectionManager</a></code></h3><div class='impl-items'><h4 id='method.drop' class='method'><code>fn <a href='https://doc.rust-lang.org/nightly/core/ops/trait.Drop.html#method.drop' class='fnname'>drop</a>(&amp;mut self)</code></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "crust";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script async src="../../search-index.js"></script>
</body>
</html>